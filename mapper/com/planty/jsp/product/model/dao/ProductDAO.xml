<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ProductDAO">
	
	<resultMap type="com.planty.jsp.board.model.dao.ProductDAO" id="selectAllProductList">
		<id property="proNo" column="PRO_NO"/>
		<result property="cateNo" column="CATE_NO"/>
		<result property="id" column="ID"/>
		<result property="proName" column="PRO_NAME"/>
		<result property="proPrice" column="PRO_PRICE"/>
		<result property="imgList" column="PRO_CONTENT"/>
		
		<association property="writer" resultMap="memberResultMap"/>
		<association property="category" resultMap="categoryResultMap"/>
	</resultMap>

	<insert id="insertProductContent" >
	        INSERT /* com.planty.jsp.product.model.dao.ProductDAO#insertProductContent() */
	          INTO PRODUCT 
	        (
	          PRO_NO
	        , CATE_NO
	        , ID	        
	        , PRO_NAME
	        , PRO_PRICE
	        , PRO_CONTENT
	        )
	        VALUES 
	        (
	          SEQ_PRO_NO.NEXTVAL
	        , #{ proNo }
	        , #{ cateNo }
	        , #{ id }
	        , #{ proName }
	        , #{ proPrice }
	        , #{ imgList }
	        )
	        <selectKey keyProperty="no" resultType="Integer" order="AFTER">
	        	SELECT
	        	       SEQ_PRO_NO.CURRVAL
	        	  FROM DUAL
	        </selectKey>
		</insert>

			
		
		<insert id="insertPrductImg">
        INSERT /* com.planty.jsp.product.model.dao.ProductDAO#insertAttachment() */
          INTO PRO_IMG
        (
          IMG_NO
        , PRO_NO
        , P_PATH
        , FILE_NAME
        , SER_FILE
        , THUM_FILE
        )
        VALUES 
        (
          SEQ_ATTACHMENT_NO.NEXTVAL
        , #{ imgNo }
        , #{ proNo }
        , #{ proPath }
        , #{ fileName }
        , #{ serFile }
        , #{ thumFile }
        )
	</insert>
		
		
		
		
		
		
		
		
</mapper>
